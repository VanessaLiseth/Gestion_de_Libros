{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USER/Desktop/gestion%20de%20libros/Gestion_de_Libros/front-biblioteca/src/components/ModalCreateUsers.tsx"],"sourcesContent":["\"use client\";\r\nimport {\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  TextField,\r\n  Button,\r\n  Grid,\r\n  Alert,\r\n} from \"@mui/material\";\r\nimport { useState } from \"react\";\r\n\r\ntype Props = {\r\n  open: boolean;\r\n  onClose: () => void;\r\n  onSuccess?: () => void;\r\n};\r\n\r\nexport default function ModalCrearUsuario({ open, onClose, onSuccess }: Props) {\r\n  const [form, setForm] = useState({\r\n    username: \"\",\r\n    password: \"\",\r\n    email: \"\",\r\n  });\r\n  const [error, setError] = useState(\"\");\r\n\r\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const { name, value } = e.target;\r\n    setForm((prev) => ({ ...prev, [name]: value }));\r\n  };\r\n\r\n  const handleSubmit = async () => {\r\n    setError(\"\");\r\n    try {\r\n      const res = await fetch(\"http://localhost:8080/register\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({\r\n          ...form,\r\n          rol: \"usuario\", // 游댠 rol quemado\r\n        }),\r\n      });\r\n\r\n      if (res.ok) {\r\n        if (onSuccess) onSuccess();\r\n        onClose();\r\n      } else {\r\n        const msg = await res.text();\r\n        setError(`Error al registrar: ${msg}`);\r\n      }\r\n    } catch {\r\n      setError(\"No se pudo conectar con el servidor.\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Dialog open={open} onClose={onClose} maxWidth=\"sm\" fullWidth>\r\n      <DialogTitle>Crear cuenta nueva</DialogTitle>\r\n      <DialogContent dividers>\r\n        {error && (\r\n          <Alert severity=\"error\" className=\"mb-4\">\r\n            {error}\r\n          </Alert>\r\n        )}\r\n        <Grid container spacing={2}>\r\n          <Grid>\r\n            <TextField\r\n              label=\"Nombre de usuario\"\r\n              name=\"username\"\r\n              fullWidth\r\n              value={form.username}\r\n              onChange={handleChange}\r\n            />\r\n          </Grid>\r\n          <Grid>\r\n            <TextField\r\n              label=\"Correo electr칩nico\"\r\n              name=\"email\"\r\n              type=\"email\"\r\n              fullWidth\r\n              value={form.email}\r\n              onChange={handleChange}\r\n            />\r\n          </Grid>\r\n          <Grid>\r\n            <TextField\r\n              label=\"Contrase침a\"\r\n              name=\"password\"\r\n              type=\"password\"\r\n              fullWidth\r\n              value={form.password}\r\n              onChange={handleChange}\r\n            />\r\n          </Grid>\r\n        </Grid>\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button onClick={onClose} color=\"inherit\">\r\n          Cancelar\r\n        </Button>\r\n        <Button onClick={handleSubmit} variant=\"contained\" color=\"primary\">\r\n          Registrarse\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA;;;AAXA;;;AAmBe,SAAS,kBAAkB,EAAE,IAAI,EAAE,OAAO,EAAE,SAAS,EAAS;;IAC3E,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;QAC/B,UAAU;QACV,UAAU;QACV,OAAO;IACT;IACA,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAEnC,MAAM,eAAe,CAAC;QACpB,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,EAAE,MAAM;QAChC,QAAQ,CAAC,OAAS,CAAC;gBAAE,GAAG,IAAI;gBAAE,CAAC,KAAK,EAAE;YAAM,CAAC;IAC/C;IAEA,MAAM,eAAe;QACnB,SAAS;QACT,IAAI;YACF,MAAM,MAAM,MAAM,MAAM,kCAAkC;gBACxD,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBACnB,GAAG,IAAI;oBACP,KAAK;gBACP;YACF;YAEA,IAAI,IAAI,EAAE,EAAE;gBACV,IAAI,WAAW;gBACf;YACF,OAAO;gBACL,MAAM,MAAM,MAAM,IAAI,IAAI;gBAC1B,SAAS,CAAC,oBAAoB,EAAE,KAAK;YACvC;QACF,EAAE,OAAM;YACN,SAAS;QACX;IACF;IAEA,qBACE,6LAAC,oMAAA,CAAA,SAAM;QAAC,MAAM;QAAM,SAAS;QAAS,UAAS;QAAK,SAAS;;0BAC3D,6LAAC,mNAAA,CAAA,cAAW;0BAAC;;;;;;0BACb,6LAAC,yNAAA,CAAA,gBAAa;gBAAC,QAAQ;;oBACpB,uBACC,6LAAC,iMAAA,CAAA,QAAK;wBAAC,UAAS;wBAAQ,WAAU;kCAC/B;;;;;;kCAGL,6LAAC,8LAAA,CAAA,OAAI;wBAAC,SAAS;wBAAC,SAAS;;0CACvB,6LAAC,8LAAA,CAAA,OAAI;0CACH,cAAA,6LAAC,6MAAA,CAAA,YAAS;oCACR,OAAM;oCACN,MAAK;oCACL,SAAS;oCACT,OAAO,KAAK,QAAQ;oCACpB,UAAU;;;;;;;;;;;0CAGd,6LAAC,8LAAA,CAAA,OAAI;0CACH,cAAA,6LAAC,6MAAA,CAAA,YAAS;oCACR,OAAM;oCACN,MAAK;oCACL,MAAK;oCACL,SAAS;oCACT,OAAO,KAAK,KAAK;oCACjB,UAAU;;;;;;;;;;;0CAGd,6LAAC,8LAAA,CAAA,OAAI;0CACH,cAAA,6LAAC,6MAAA,CAAA,YAAS;oCACR,OAAM;oCACN,MAAK;oCACL,MAAK;oCACL,SAAS;oCACT,OAAO,KAAK,QAAQ;oCACpB,UAAU;;;;;;;;;;;;;;;;;;;;;;;0BAKlB,6LAAC,yNAAA,CAAA,gBAAa;;kCACZ,6LAAC,oMAAA,CAAA,SAAM;wBAAC,SAAS;wBAAS,OAAM;kCAAU;;;;;;kCAG1C,6LAAC,oMAAA,CAAA,SAAM;wBAAC,SAAS;wBAAc,SAAQ;wBAAY,OAAM;kCAAU;;;;;;;;;;;;;;;;;;AAM3E;GAxFwB;KAAA","debugId":null}},
    {"offset": {"line": 205, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USER/Desktop/gestion%20de%20libros/Gestion_de_Libros/front-biblioteca/src/app/page.tsx"],"sourcesContent":["\"use client\";\nimport { useState } from \"react\";\nimport {\n  TextField,\n  Button,\n  Card,\n  CardContent,\n  Typography,\n  Alert,\n} from \"@mui/material\";\nimport { useRouter } from \"next/navigation\";\nimport ModalCrearUsuario from \"@/components/ModalCreateUsers\";\n\nexport default function Login() {\n  const [usuario, setUsuario] = useState(\"\");\n  const [contrasena, setContrasena] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const router = useRouter();\n  const [openCrearUsuario, setOpenCrearUsuario] = useState(false);\n\n  const handleLogin = async () => {\n    setError(\"\");\n\n    try {\n      const response = await fetch(\"http://localhost:8080/login\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          username: usuario,\n          password: contrasena,\n        }),\n      });\n\n      if (response.ok) {\n        const data = await response.json();\n        localStorage.setItem(\"rol\", data.rol);\n        localStorage.setItem(\"userId\", data.id.toString());\n        router.push(\"/home\");\n      } else {\n        setError(\"Error de autenticaci칩n: Usuario o contrase침a incorrectos.\");\n      }\n    } catch {\n      setError(\"Error al conectar con el servidor.\");\n    }\n  };\n\n  return (\n    <div className=\"flex items-center justify-center h-screen bg-gradient-to-br from-purple-200 to-indigo-300\">\n      <Card className=\"w-full max-w-md shadow-xl rounded-2xl\">\n        <CardContent className=\"p-8 space-y-6\">\n          <Typography\n            variant=\"h5\"\n            className=\"text-center font-semibold text-gray-800\"\n          >\n            Iniciar Sesi칩n\n          </Typography>\n\n          {error && <Alert severity=\"error\">{error}</Alert>}\n\n          <TextField\n            label=\"Usuario\"\n            variant=\"outlined\"\n            fullWidth\n            value={usuario}\n            onChange={(e) => setUsuario(e.target.value)}\n          />\n\n          <TextField\n            label=\"Contrase침a\"\n            variant=\"outlined\"\n            type=\"password\"\n            fullWidth\n            value={contrasena}\n            onChange={(e) => setContrasena(e.target.value)}\n          />\n\n          <Button\n            variant=\"text\"\n            fullWidth\n            className=\"rounded-xl bg-purple-200 text-purple-600\"\n            onClick={handleLogin}\n          >\n            Ingresar\n          </Button>\n\n          <Button\n            fullWidth\n            className=\"rounded-xl bg-purple-200 text-purple-600\"\n            onClick={() => setOpenCrearUsuario(true)}\n          >\n            Crear cuenta nueva\n          </Button>\n        </CardContent>\n      </Card>\n\n      <ModalCrearUsuario\n        open={openCrearUsuario}\n        onClose={() => setOpenCrearUsuario(false)}\n        onSuccess={() => {\n          setOpenCrearUsuario(false);\n          alert(\"Usuario registrado con 칠xito.\");\n        }}\n      />\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AACA;;;AAXA;;;;;AAae,SAAS;;IACtB,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAC7C,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACnC,MAAM,SAAS,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAEzD,MAAM,cAAc;QAClB,SAAS;QAET,IAAI;YACF,MAAM,WAAW,MAAM,MAAM,+BAA+B;gBAC1D,QAAQ;gBACR,SAAS;oBACP,gBAAgB;gBAClB;gBACA,MAAM,KAAK,SAAS,CAAC;oBACnB,UAAU;oBACV,UAAU;gBACZ;YACF;YAEA,IAAI,SAAS,EAAE,EAAE;gBACf,MAAM,OAAO,MAAM,SAAS,IAAI;gBAChC,aAAa,OAAO,CAAC,OAAO,KAAK,GAAG;gBACpC,aAAa,OAAO,CAAC,UAAU,KAAK,EAAE,CAAC,QAAQ;gBAC/C,OAAO,IAAI,CAAC;YACd,OAAO;gBACL,SAAS;YACX;QACF,EAAE,OAAM;YACN,SAAS;QACX;IACF;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC,8LAAA,CAAA,OAAI;gBAAC,WAAU;0BACd,cAAA,6LAAC,mNAAA,CAAA,cAAW;oBAAC,WAAU;;sCACrB,6LAAC,gNAAA,CAAA,aAAU;4BACT,SAAQ;4BACR,WAAU;sCACX;;;;;;wBAIA,uBAAS,6LAAC,iMAAA,CAAA,QAAK;4BAAC,UAAS;sCAAS;;;;;;sCAEnC,6LAAC,6MAAA,CAAA,YAAS;4BACR,OAAM;4BACN,SAAQ;4BACR,SAAS;4BACT,OAAO;4BACP,UAAU,CAAC,IAAM,WAAW,EAAE,MAAM,CAAC,KAAK;;;;;;sCAG5C,6LAAC,6MAAA,CAAA,YAAS;4BACR,OAAM;4BACN,SAAQ;4BACR,MAAK;4BACL,SAAS;4BACT,OAAO;4BACP,UAAU,CAAC,IAAM,cAAc,EAAE,MAAM,CAAC,KAAK;;;;;;sCAG/C,6LAAC,oMAAA,CAAA,SAAM;4BACL,SAAQ;4BACR,SAAS;4BACT,WAAU;4BACV,SAAS;sCACV;;;;;;sCAID,6LAAC,oMAAA,CAAA,SAAM;4BACL,SAAS;4BACT,WAAU;4BACV,SAAS,IAAM,oBAAoB;sCACpC;;;;;;;;;;;;;;;;;0BAML,6LAAC,yIAAA,CAAA,UAAiB;gBAChB,MAAM;gBACN,SAAS,IAAM,oBAAoB;gBACnC,WAAW;oBACT,oBAAoB;oBACpB,MAAM;gBACR;;;;;;;;;;;;AAIR;GA9FwB;;QAIP,qIAAA,CAAA,YAAS;;;KAJF","debugId":null}}]
}