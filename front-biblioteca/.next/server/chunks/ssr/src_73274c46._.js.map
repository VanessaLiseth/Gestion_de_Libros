{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USER/Desktop/gestion%20de%20libros/Gestion_de_Libros/front-biblioteca/src/components/ModalCreateBooks.tsx"],"sourcesContent":["\"use client\";\r\nimport {\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  Button,\r\n  TextField,\r\n  MenuItem,\r\n  CircularProgress,\r\n  Grid,\r\n} from \"@mui/material\";\r\nimport { useEffect, useState } from \"react\";\r\n\r\ntype Option = {\r\n  id: number;\r\n  name: string;\r\n};\r\n\r\ntype Props = {\r\n  open: boolean;\r\n  onClose: () => void;\r\n  onSuccess?: () => void;\r\n};\r\n\r\nexport default function ModalCrearLibro({ open, onClose, onSuccess }: Props) {\r\n  const [autores, setAutores] = useState<Option[]>([]);\r\n  const [categorias, setCategorias] = useState<Option[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [form, setForm] = useState({\r\n    title: \"\",\r\n    publication_date: \"\",\r\n    isbn: \"\",\r\n    stock: 0,\r\n    autor_id: \"\",\r\n    category_id: \"\",\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (open) {\r\n      const fetchData = async () => {\r\n        try {\r\n          const [resAutores, resCategorias] = await Promise.all([\r\n            fetch(\"http://localhost:8080/authors\"),\r\n            fetch(\"http://localhost:8080/categories\"),\r\n          ]);\r\n          const autoresData = await resAutores.json();\r\n          const categoriasData = await resCategorias.json();\r\n          setAutores(autoresData);\r\n          setCategorias(categoriasData);\r\n        } catch (error) {\r\n          console.error(\"Error cargando datos:\", error);\r\n        } finally {\r\n          setLoading(false);\r\n        }\r\n      };\r\n\r\n      fetchData();\r\n    }\r\n  }, [open]);\r\n\r\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const { name, value } = e.target;\r\n    setForm((prev) => ({ ...prev, [name]: value }));\r\n  };\r\n\r\n  const handleSubmit = async () => {\r\n    try {\r\n      const res = await fetch(\"http://localhost:8080/books\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({\r\n          ...form,\r\n          stock: Number(form.stock),\r\n          autor_id: Number(form.autor_id),\r\n          category_id: Number(form.category_id),\r\n        }),\r\n      });\r\n\r\n      if (res.ok) {\r\n        if (onSuccess) onSuccess();\r\n        onClose();\r\n      } else {\r\n        alert(\"Error al crear libro\");\r\n      }\r\n    } catch  {\r\n      alert(\"Error en la conexión\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Dialog open={open} onClose={onClose} maxWidth=\"sm\" fullWidth>\r\n      <DialogTitle>Crear nuevo libro</DialogTitle>\r\n      <DialogContent dividers>\r\n        {loading ? (\r\n          <div className=\"flex justify-center py-8\">\r\n            <CircularProgress />\r\n          </div>\r\n        ) : (\r\n          <Grid container spacing={2} className=\"pt-2\">\r\n            <Grid >\r\n              <TextField\r\n                fullWidth\r\n                label=\"Título\"\r\n                name=\"title\"\r\n                value={form.title}\r\n                onChange={handleChange}\r\n              />\r\n            </Grid>\r\n            <Grid >\r\n              <TextField\r\n                fullWidth\r\n                type=\"date\"\r\n                label=\"Fecha de publicación\"\r\n                name=\"publication_date\"\r\n                value={form.publication_date}\r\n                onChange={handleChange}\r\n                InputLabelProps={{ shrink: true }}\r\n              />\r\n            </Grid>\r\n            <Grid>\r\n              <TextField\r\n                fullWidth\r\n                label=\"ISBN\"\r\n                name=\"isbn\"\r\n                value={form.isbn}\r\n                onChange={handleChange}\r\n              />\r\n            </Grid>\r\n            <Grid>\r\n              <TextField\r\n                fullWidth\r\n                type=\"number\"\r\n                label=\"Stock\"\r\n                name=\"stock\"\r\n                value={form.stock}\r\n                onChange={handleChange}\r\n              />\r\n            </Grid>\r\n            <Grid>\r\n              <TextField\r\n                fullWidth\r\n                select\r\n                label=\"Autor\"\r\n                name=\"autor_id\"\r\n                value={form.autor_id}\r\n                onChange={handleChange}\r\n              >\r\n                {autores.map((autor) => (\r\n                  <MenuItem key={autor.id} value={autor.id}>\r\n                    {autor.name}\r\n                  </MenuItem>\r\n                ))}\r\n              </TextField>\r\n            </Grid>\r\n            <Grid>\r\n              <TextField\r\n                fullWidth\r\n                select\r\n                label=\"Categoría\"\r\n                name=\"category_id\"\r\n                value={form.category_id}\r\n                onChange={handleChange}\r\n              >\r\n                {categorias.map((cat) => (\r\n                  <MenuItem key={cat.id} value={cat.id}>\r\n                    {cat.name}\r\n                  </MenuItem>\r\n                ))}\r\n              </TextField>\r\n            </Grid>\r\n          </Grid>\r\n        )}\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button onClick={onClose} color=\"inherit\">\r\n          Cancelar\r\n        </Button>\r\n        <Button onClick={handleSubmit} variant=\"contained\" color=\"primary\">\r\n          Guardar\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 298, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USER/Desktop/gestion%20de%20libros/Gestion_de_Libros/front-biblioteca/src/app/home/page.tsx"],"sourcesContent":["\"use client\";\r\nimport { useEffect, useState } from \"react\";\r\nimport {\r\n  Table,\r\n  TableHead,\r\n  TableRow,\r\n  TableCell,\r\n  TableBody,\r\n  Paper,\r\n  Typography,\r\n  TableContainer,\r\n  CircularProgress,\r\n  Button,\r\n  Tooltip,\r\n  IconButton,\r\n} from \"@mui/material\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport ModalCrearLibro from \"@/components/ModalCreateBooks\";\r\nimport { Logout } from \"@mui/icons-material\";\r\n\r\ntype Libro = {\r\n  id: number;\r\n  title: string;\r\n  publication_date: string;\r\n  isbn: string;\r\n  stock: number;\r\n  autor: string;\r\n  category: string;\r\n};\r\n\r\nexport default function Dashboard() {\r\n  const [libros, setLibros] = useState<Libro[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [rol, setRol] = useState<string | null>(null);\r\n  const [openModal, setOpenModal] = useState(false);\r\n  const router = useRouter();\r\n\r\n  const fetchLibros = async () => {\r\n    try {\r\n      const res = await fetch(\"http://localhost:8080/books\");\r\n      const data = await res.json();\r\n      setLibros(data);\r\n    } catch (error) {\r\n      console.error(\"Error al cargar libros:\", error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const storedRol = localStorage.getItem(\"rol\");\r\n    setRol(storedRol);\r\n    fetchLibros();\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"p-8 bg-gray-100 min-h-screen\">\r\n      <div className=\"flex justify-between items-center mb-6\">\r\n        <Typography variant=\"h4\" className=\"font-bold text-gray-700\">\r\n          Catálogo de Libros\r\n        </Typography>\r\n\r\n        {rol === \"admin\" && (\r\n          <>\r\n            <Button\r\n              variant=\"contained\"\r\n              onClick={() => setOpenModal(true)}\r\n              className=\"rounded-xl bg-purple-200 text-purple-600\"\r\n            >\r\n              Crear nuevo libro\r\n            </Button>\r\n\r\n            <ModalCrearLibro\r\n              open={openModal}\r\n              onClose={() => setOpenModal(false)}\r\n              onSuccess={() => {\r\n                fetchLibros();\r\n                setOpenModal(false);\r\n              }}\r\n            />\r\n          </>\r\n        )}\r\n      </div>\r\n\r\n      <Tooltip title=\"Cerrar sesión\">\r\n        <IconButton\r\n          color=\"error\"\r\n          onClick={() => {\r\n            localStorage.removeItem(\"rol\");\r\n            router.push(\"/\");\r\n          }}\r\n        >\r\n          <Logout />\r\n        </IconButton>\r\n      </Tooltip>\r\n\r\n      {loading ? (\r\n        <div className=\"flex justify-center items-center mt-12\">\r\n          <CircularProgress />\r\n        </div>\r\n      ) : (\r\n        <TableContainer component={Paper} className=\"shadow-md rounded-lg\">\r\n          <Table>\r\n            <TableHead>\r\n              <TableRow className=\"bg-purple-200\">\r\n                <TableCell>\r\n                  <strong>Título</strong>\r\n                </TableCell>\r\n                <TableCell>\r\n                  <strong>Fecha de Publicación</strong>\r\n                </TableCell>\r\n                <TableCell>\r\n                  <strong>ISBN</strong>\r\n                </TableCell>\r\n                <TableCell>\r\n                  <strong>Stock</strong>\r\n                </TableCell>\r\n                <TableCell>\r\n                  <strong>Autor</strong>\r\n                </TableCell>\r\n                <TableCell>\r\n                  <strong>Categoría</strong>\r\n                </TableCell>\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {libros.map((libro) => (\r\n                <TableRow key={libro.id}>\r\n                  <TableCell>{libro.title}</TableCell>\r\n                  <TableCell>{libro.publication_date}</TableCell>\r\n                  <TableCell>{libro.isbn}</TableCell>\r\n                  <TableCell>{libro.stock}</TableCell>\r\n                  <TableCell>{libro.autor}</TableCell>\r\n                  <TableCell>{libro.category}</TableCell>\r\n                </TableRow>\r\n              ))}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}