{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USER/Desktop/gestion%20de%20libros/Gestion_de_Libros/front-biblioteca/src/components/UserLoans.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport {\r\n  Button,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogContentText,\r\n  DialogTitle\r\n} from '@mui/material';\r\n\r\ninterface Loan {\r\n  id: number;\r\n  user_id: number;\r\n  user_name: string;\r\n  book_id: number;\r\n  book_title: string;\r\n  loan_date: string;\r\n  loan_devolution: string | null;\r\n  status: string;\r\n}\r\n\r\ninterface Props {\r\n  userId: number;\r\n}\r\n\r\nexport default function UserLoans({ userId }: Props) {\r\n  const [loans, setLoans] = useState<Loan[]>([]);\r\n  const [openDialog, setOpenDialog] = useState(false);\r\n  const [selectedLoanId, setSelectedLoanId] = useState<number | null>(null);\r\n\r\n  useEffect(() => {\r\n    fetch(`http://localhost:8080/loans/${userId}`)\r\n      .then(response => response.json())\r\n      .then(data => setLoans(data))\r\n      .catch(error => console.error('Error fetching loans:', error));\r\n  }, [userId]);\r\n\r\n  const handleReturnClick = (id: number) => {\r\n    setSelectedLoanId(id);\r\n    setOpenDialog(true);\r\n  };\r\n\r\n  const handleConfirmReturn = () => {\r\n    if (selectedLoanId !== null) {\r\n      fetch(`http://localhost:8080/return/${selectedLoanId}`, {\r\n        method: 'POST',\r\n      })\r\n        .then(() => {\r\n          setLoans(loans =>\r\n            loans.map(loan =>\r\n              loan.id === selectedLoanId\r\n                ? {\r\n                    ...loan,\r\n                    status: 'Devuelto',\r\n                    loan_devolution: new Date().toISOString().split('T')[0],\r\n                  }\r\n                : loan\r\n            )\r\n          );\r\n        })\r\n        .catch(error => console.error('Error returning book:', error));\r\n    }\r\n    setOpenDialog(false);\r\n    setSelectedLoanId(null);\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-6\">\r\n      <h1 className=\"text-2xl font-bold mb-4\">Libros pedidos por el usuario</h1>\r\n      <table className=\"min-w-full bg-white border border-gray-200\">\r\n        <thead>\r\n          <tr className=\"bg-gray-100\">\r\n            <th className=\"py-2 px-4 border-b\">Usuario</th>\r\n            <th className=\"py-2 px-4 border-b\">Libro</th>\r\n            <th className=\"py-2 px-4 border-b\">Fecha Préstamo</th>\r\n            <th className=\"py-2 px-4 border-b\">Fecha Devolución</th>\r\n            <th className=\"py-2 px-4 border-b\">Estado</th>\r\n            <th className=\"py-2 px-4 border-b\">Acciones</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {loans.map((loan) => (\r\n            <tr key={loan.id}>\r\n              <td className=\"py-2 px-4 border-b\">{loan.user_name}</td>\r\n              <td className=\"py-2 px-4 border-b\">{loan.book_title}</td>\r\n              <td className=\"py-2 px-4 border-b\">{loan.loan_date}</td>\r\n              <td className=\"py-2 px-4 border-b\">{loan.loan_devolution || '-'}</td>\r\n              <td className=\"py-2 px-4 border-b\">{loan.status}</td>\r\n              <td className=\"py-2 px-4 border-b\">\r\n                {loan.status !== 'Devuelto' && (\r\n                  <Button variant=\"contained\" color=\"primary\" onClick={() => handleReturnClick(loan.id)}>\r\n                    Devolver\r\n                  </Button>\r\n                )}\r\n              </td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n\r\n      <Dialog open={openDialog} onClose={() => setOpenDialog(false)}>\r\n        <DialogTitle>Confirmar Devolución</DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText>\r\n            ¿Estás seguro de que deseas marcar este libro como devuelto?\r\n          </DialogContentText>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => setOpenDialog(false)} color=\"secondary\">\r\n            Cancelar\r\n          </Button>\r\n          <Button onClick={handleConfirmReturn} color=\"primary\" autoFocus>\r\n            Confirmar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 274, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USER/Desktop/gestion%20de%20libros/Gestion_de_Libros/front-biblioteca/src/components/NavBarComponent.tsx"],"sourcesContent":["\"use client\";\r\nimport { AppBar, Toolbar, Typography, Button } from \"@mui/material\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { useEffect, useState } from \"react\";\r\n\r\nexport default function Navbar() {\r\n  const router = useRouter();\r\n  const [userId, setUserId] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    const storedId = localStorage.getItem(\"userId\");\r\n    setUserId(storedId);\r\n  }, []);\r\n\r\n  return (\r\n    <AppBar position=\"static\" className=\"bg-purple-600\">\r\n      <Toolbar className=\"flex justify-between\">\r\n        <Typography\r\n          variant=\"h6\"\r\n          className=\"cursor-pointer\"\r\n          onClick={() => router.push(\"/home\")}\r\n        >\r\n          Biblioteca\r\n        </Typography>\r\n        <div className=\"flex gap-4\">\r\n          <Button color=\"inherit\" onClick={() => router.push(\"/home\")}>\r\n            Home\r\n          </Button>\r\n          <Button\r\n            color=\"inherit\"\r\n            onClick={() => {\r\n              if (userId) {\r\n                router.push(`/loans/${userId}`);\r\n              } else {\r\n                alert(\"No se ha encontrado el ID del usuario.\");\r\n              }\r\n            }}\r\n          >\r\n            Préstamos\r\n          </Button>\r\n        </div>\r\n      </Toolbar>\r\n    </AppBar>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAHA;;;;;AAKe,SAAS;IACtB,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,CAAC,QAAQ,UAAU,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB;IAEpD,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,WAAW,aAAa,OAAO,CAAC;QACtC,UAAU;IACZ,GAAG,EAAE;IAEL,qBACE,8OAAC,iMAAA,CAAA,SAAM;QAAC,UAAS;QAAS,WAAU;kBAClC,cAAA,8OAAC,oMAAA,CAAA,UAAO;YAAC,WAAU;;8BACjB,8OAAC,6MAAA,CAAA,aAAU;oBACT,SAAQ;oBACR,WAAU;oBACV,SAAS,IAAM,OAAO,IAAI,CAAC;8BAC5B;;;;;;8BAGD,8OAAC;oBAAI,WAAU;;sCACb,8OAAC,iMAAA,CAAA,SAAM;4BAAC,OAAM;4BAAU,SAAS,IAAM,OAAO,IAAI,CAAC;sCAAU;;;;;;sCAG7D,8OAAC,iMAAA,CAAA,SAAM;4BACL,OAAM;4BACN,SAAS;gCACP,IAAI,QAAQ;oCACV,OAAO,IAAI,CAAC,CAAC,OAAO,EAAE,QAAQ;gCAChC,OAAO;oCACL,MAAM;gCACR;4BACF;sCACD;;;;;;;;;;;;;;;;;;;;;;;AAOX","debugId":null}},
    {"offset": {"line": 363, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USER/Desktop/gestion%20de%20libros/Gestion_de_Libros/front-biblioteca/src/app/loans/%5Bid%5D/page.tsx"],"sourcesContent":["\"use client\";\r\nimport { useParams } from \"next/navigation\";\r\nimport UserLoans from \"@/components/UserLoans\"; \r\nimport Navbar from \"@/components/NavBarComponent\";\r\n\r\nexport default function PrestamosPage() {\r\n  const params = useParams();\r\n  const id = parseInt(params.id as string, 10);\r\n\r\n  return (\r\n    <>\r\n      <Navbar />\r\n      <UserLoans userId={id} />\r\n    </>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AACA;AACA;AACA;AAHA;;;;;AAKe,SAAS;IACtB,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,KAAK,SAAS,OAAO,EAAE,EAAY;IAEzC,qBACE;;0BACE,8OAAC,qIAAA,CAAA,UAAM;;;;;0BACP,8OAAC,+HAAA,CAAA,UAAS;gBAAC,QAAQ;;;;;;;;AAGzB","debugId":null}}]
}